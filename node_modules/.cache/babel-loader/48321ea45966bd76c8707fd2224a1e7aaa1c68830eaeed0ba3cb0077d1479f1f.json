{"ast":null,"code":"// // actions.js\n// import axios from 'axios';\n// import {\n//     LOGIN_USER_REQUEST,\n//     LOGIN_USER_SUCCESS,\n//     LOGIN_USER_FAILURE,\n//   } from './action_types';\n// import { useNavigate } from 'react-router';\n\n// // export const loginRequest = () => ({\n// //   type: LOGIN_USER_REQUEST,\n// // });\n\n// // export const loginSuccess = (token) => ({\n// //   type: LOGIN_USER_SUCCESS,\n// //   payload: token,\n// // });\n\n// // export const loginFailure = (error) => ({\n// //   type: LOGIN_USER_FAILURE,\n// //   payload: error,\n// // });\n\n// export const loginUser = (email, password) => async (dispatch) => {\n\n//   try {\n//     const loginData = {\n//       email,\n//       password,\n//     };\n//     dispatch(loginRequest());\n//     const navigate = useNavigate()\n\n//     const response = await axios.post(\n//       \"http://localhost:1213/user/login-user\",\n//       loginData\n//     );\n\n//     if (response.status === 200) {\n//       const token = response.data.token;\n//       localStorage.setItem(\"userToken\", token);\n//       dispatch(loginSuccess(token));\n//       navigate(\"/\")\n//     } else {\n//       dispatch(loginFailure(response.data.error));\n//     }\n//   } catch (error) {\n//     if (error.response) {\n//       const errorMessage = error.response.data.error;\n//       dispatch(loginFailure(errorMessage));\n//     } else if (error.request) {\n//       dispatch(loginFailure(\"No response received from the server.\"));\n//     } else {\n//       dispatch(loginFailure(error.message));\n//     }\n//   }\n// };\n\nimport { LOGIN_USER_FAILURE, LOGIN_USER_REQUEST, LOGIN_USER_SUCCESS } from \"../actions/action_types\";\nimport axios from \"axios\";\nconst loginUser = (email, password) => async dispatch => {\n  try {\n    dispatch({\n      type: LOGIN_USER_REQUEST\n    });\n    const config = {\n      headers: {\n        \"Content-type\": \"application/json\"\n      }\n    };\n    const response = await axios.post(\"http://localhost:1213/user/login-user\", {\n      email,\n      password\n    }, config);\n    dispatch({\n      type: LOGIN_USER_SUCCESS,\n      payload: response\n    });\n    localStorage.setItem(\"userInfo\", response.data.message);\n  } catch (error) {\n    console.log(\"Error response from server:\", error);\n    let errorMessage = \"An error occurred\"; // Default error message\n\n    if (error.response && error.response.data.error) {\n      errorMessage = error.response.data.error; // Use the error message from the server if available\n    }\n\n    dispatch({\n      type: LOGIN_USER_FAILURE,\n      payload: errorMessage\n    });\n  }\n};\nexport default loginUser;","map":{"version":3,"names":["LOGIN_USER_FAILURE","LOGIN_USER_REQUEST","LOGIN_USER_SUCCESS","axios","loginUser","email","password","dispatch","type","config","headers","response","post","payload","localStorage","setItem","data","message","error","console","log","errorMessage"],"sources":["/Users/apple/Documents/Ecommerce/client/src/actions/user_login_actions.js"],"sourcesContent":["// // actions.js\n// import axios from 'axios';\n// import {\n//     LOGIN_USER_REQUEST,\n//     LOGIN_USER_SUCCESS,\n//     LOGIN_USER_FAILURE,\n//   } from './action_types';\n// import { useNavigate } from 'react-router';\n\n// // export const loginRequest = () => ({\n// //   type: LOGIN_USER_REQUEST,\n// // });\n\n// // export const loginSuccess = (token) => ({\n// //   type: LOGIN_USER_SUCCESS,\n// //   payload: token,\n// // });\n\n// // export const loginFailure = (error) => ({\n// //   type: LOGIN_USER_FAILURE,\n// //   payload: error,\n// // });\n\n// export const loginUser = (email, password) => async (dispatch) => {\n  \n//   try {\n//     const loginData = {\n//       email,\n//       password,\n//     };\n//     dispatch(loginRequest());\n//     const navigate = useNavigate()\n\n//     const response = await axios.post(\n//       \"http://localhost:1213/user/login-user\",\n//       loginData\n//     );\n\n//     if (response.status === 200) {\n//       const token = response.data.token;\n//       localStorage.setItem(\"userToken\", token);\n//       dispatch(loginSuccess(token));\n//       navigate(\"/\")\n//     } else {\n//       dispatch(loginFailure(response.data.error));\n//     }\n//   } catch (error) {\n//     if (error.response) {\n//       const errorMessage = error.response.data.error;\n//       dispatch(loginFailure(errorMessage));\n//     } else if (error.request) {\n//       dispatch(loginFailure(\"No response received from the server.\"));\n//     } else {\n//       dispatch(loginFailure(error.message));\n//     }\n//   }\n// };\n\n\nimport { LOGIN_USER_FAILURE,LOGIN_USER_REQUEST,LOGIN_USER_SUCCESS } from \"../actions/action_types\";\nimport axios from \"axios\"\n\nconst loginUser= (email,password)=>async(dispatch)=>{\n  try {\n      dispatch({type:LOGIN_USER_REQUEST})\n      const config = {\n        headers:{\n          \"Content-type\":\"application/json\"\n        }\n      }\n\n      const response = await axios.post(\"http://localhost:1213/user/login-user\",{email,password},config)\n      dispatch({type:LOGIN_USER_SUCCESS,payload:response})\n      localStorage.setItem(\"userInfo\",response.data.message)\n\n  } catch (error) {\n\n  console.log(\"Error response from server:\", error);\n    let errorMessage = \"An error occurred\"; // Default error message\n\n  \n    if (error.response && error.response.data.error) {\n      errorMessage = error.response.data.error; // Use the error message from the server if available\n    }\n\n    dispatch({ type: LOGIN_USER_FAILURE, payload: errorMessage });\n  }\n}\nexport default loginUser;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASA,kBAAkB,EAACC,kBAAkB,EAACC,kBAAkB,QAAQ,yBAAyB;AAClG,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,SAAS,GAAEA,CAACC,KAAK,EAACC,QAAQ,KAAG,MAAMC,QAAQ,IAAG;EAClD,IAAI;IACAA,QAAQ,CAAC;MAACC,IAAI,EAACP;IAAkB,CAAC,CAAC;IACnC,MAAMQ,MAAM,GAAG;MACbC,OAAO,EAAC;QACN,cAAc,EAAC;MACjB;IACF,CAAC;IAED,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAAC,uCAAuC,EAAC;MAACP,KAAK;MAACC;IAAQ,CAAC,EAACG,MAAM,CAAC;IAClGF,QAAQ,CAAC;MAACC,IAAI,EAACN,kBAAkB;MAACW,OAAO,EAACF;IAAQ,CAAC,CAAC;IACpDG,YAAY,CAACC,OAAO,CAAC,UAAU,EAACJ,QAAQ,CAACK,IAAI,CAACC,OAAO,CAAC;EAE1D,CAAC,CAAC,OAAOC,KAAK,EAAE;IAEhBC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEF,KAAK,CAAC;IAC/C,IAAIG,YAAY,GAAG,mBAAmB,CAAC,CAAC;;IAGxC,IAAIH,KAAK,CAACP,QAAQ,IAAIO,KAAK,CAACP,QAAQ,CAACK,IAAI,CAACE,KAAK,EAAE;MAC/CG,YAAY,GAAGH,KAAK,CAACP,QAAQ,CAACK,IAAI,CAACE,KAAK,CAAC,CAAC;IAC5C;;IAEAX,QAAQ,CAAC;MAAEC,IAAI,EAAER,kBAAkB;MAAEa,OAAO,EAAEQ;IAAa,CAAC,CAAC;EAC/D;AACF,CAAC;AACD,eAAejB,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}
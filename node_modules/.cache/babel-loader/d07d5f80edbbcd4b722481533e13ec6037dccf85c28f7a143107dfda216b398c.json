{"ast":null,"code":"// actions.js\n\nimport axios from 'axios';\nimport { LOGIN_USER_REQUEST, LOGIN_USER_SUCCESS, LOGIN_USER_FAILURE } from './action_types';\nimport { useNavigate } from 'react-router';\n\n// export const loginRequest = () => ({\n//   type: LOGIN_USER_REQUEST,\n// });\n\n// export const loginSuccess = (token) => ({\n//   type: LOGIN_USER_SUCCESS,\n//   payload: token,\n// });\n\n// export const loginFailure = (error) => ({\n//   type: LOGIN_USER_FAILURE,\n//   payload: error,\n// });\n\nexport const loginUser = (email, password) => {\n  var _s = $RefreshSig$();\n  return _s(async dispatch => {\n    _s();\n    dispatch(loginRequest());\n    try {\n      const loginData = {\n        email,\n        password\n      };\n      const navigate = useNavigate();\n      const response = await axios.post(\"http://localhost:1213/user/login-user\", loginData);\n      if (response.status === 200) {\n        const token = response.data.token;\n        localStorage.setItem(\"userToken\", token);\n        dispatch(loginSuccess(token));\n        navigate(\"/\");\n      } else {\n        dispatch(loginFailure(response.data.error));\n      }\n    } catch (error) {\n      if (error.response) {\n        const errorMessage = error.response.data.error;\n        dispatch(loginFailure(errorMessage));\n      } else if (error.request) {\n        dispatch(loginFailure(\"No response received from the server.\"));\n      } else {\n        dispatch(loginFailure(error.message));\n      }\n    }\n  }, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n    return [useNavigate];\n  });\n};","map":{"version":3,"names":["axios","LOGIN_USER_REQUEST","LOGIN_USER_SUCCESS","LOGIN_USER_FAILURE","useNavigate","loginUser","email","password","_s","$RefreshSig$","dispatch","loginRequest","loginData","navigate","response","post","status","token","data","localStorage","setItem","loginSuccess","loginFailure","error","errorMessage","request","message"],"sources":["/Users/apple/Documents/Ecommerce/client/src/actions/user_login_actions.js"],"sourcesContent":["// actions.js\n\nimport axios from 'axios';\nimport {\n    LOGIN_USER_REQUEST,\n    LOGIN_USER_SUCCESS,\n    LOGIN_USER_FAILURE,\n  } from './action_types';\nimport { useNavigate } from 'react-router';\n\n// export const loginRequest = () => ({\n//   type: LOGIN_USER_REQUEST,\n// });\n\n// export const loginSuccess = (token) => ({\n//   type: LOGIN_USER_SUCCESS,\n//   payload: token,\n// });\n\n// export const loginFailure = (error) => ({\n//   type: LOGIN_USER_FAILURE,\n//   payload: error,\n// });\n\nexport const loginUser = (email, password) => async (dispatch) => {\n  dispatch(loginRequest());\n  \n  try {\n    const loginData = {\n      email,\n      password,\n    };\n    const navigate = useNavigate()\n\n    const response = await axios.post(\n      \"http://localhost:1213/user/login-user\",\n      loginData\n    );\n\n    if (response.status === 200) {\n      const token = response.data.token;\n      localStorage.setItem(\"userToken\", token);\n      dispatch(loginSuccess(token));\n      navigate(\"/\")\n    } else {\n      dispatch(loginFailure(response.data.error));\n    }\n  } catch (error) {\n    if (error.response) {\n      const errorMessage = error.response.data.error;\n      dispatch(loginFailure(errorMessage));\n    } else if (error.request) {\n      dispatch(loginFailure(\"No response received from the server.\"));\n    } else {\n      dispatch(loginFailure(error.message));\n    }\n  }\n};\n"],"mappings":"AAAA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,SACIC,kBAAkB,EAClBC,kBAAkB,EAClBC,kBAAkB,QACb,gBAAgB;AACzB,SAASC,WAAW,QAAQ,cAAc;;AAE1C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,SAAS,GAAGA,CAACC,KAAK,EAAEC,QAAQ;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAAA,OAAAD,EAAA,CAAK,MAAOE,QAAQ,IAAK;IAAAF,EAAA;IAChEE,QAAQ,CAACC,YAAY,CAAC,CAAC,CAAC;IAExB,IAAI;MACF,MAAMC,SAAS,GAAG;QAChBN,KAAK;QACLC;MACF,CAAC;MACD,MAAMM,QAAQ,GAAGT,WAAW,CAAC,CAAC;MAE9B,MAAMU,QAAQ,GAAG,MAAMd,KAAK,CAACe,IAAI,CAC/B,uCAAuC,EACvCH,SACF,CAAC;MAED,IAAIE,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;QAC3B,MAAMC,KAAK,GAAGH,QAAQ,CAACI,IAAI,CAACD,KAAK;QACjCE,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEH,KAAK,CAAC;QACxCP,QAAQ,CAACW,YAAY,CAACJ,KAAK,CAAC,CAAC;QAC7BJ,QAAQ,CAAC,GAAG,CAAC;MACf,CAAC,MAAM;QACLH,QAAQ,CAACY,YAAY,CAACR,QAAQ,CAACI,IAAI,CAACK,KAAK,CAAC,CAAC;MAC7C;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACd,IAAIA,KAAK,CAACT,QAAQ,EAAE;QAClB,MAAMU,YAAY,GAAGD,KAAK,CAACT,QAAQ,CAACI,IAAI,CAACK,KAAK;QAC9Cb,QAAQ,CAACY,YAAY,CAACE,YAAY,CAAC,CAAC;MACtC,CAAC,MAAM,IAAID,KAAK,CAACE,OAAO,EAAE;QACxBf,QAAQ,CAACY,YAAY,CAAC,uCAAuC,CAAC,CAAC;MACjE,CAAC,MAAM;QACLZ,QAAQ,CAACY,YAAY,CAACC,KAAK,CAACG,OAAO,CAAC,CAAC;MACvC;IACF;EACF,CAAC;IAAA,QAzBoBtB,WAAW;EAAA;AAAA,CAyB/B"},"metadata":{},"sourceType":"module","externalDependencies":[]}